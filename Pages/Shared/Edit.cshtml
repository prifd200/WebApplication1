@model WebApplication1.Models.Ticket
@using WebApplication1.Models
    
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="card mb-4">
                    <div class="card-header bg-white py-3">
                        <h2 class="mb-0 fs-3">Редактировать заявку</h2>
                    </div>
                    <div class="card-body p-4">
                        <form asp-controller="Tickets" asp-action="Edit" method="post">
                            <input type="hidden" name="id" value="@ViewBag.Id" />
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                            <div class="mb-4">
                                <label asp-for="Description" class="form-label required-field">Описание заявки</label>
                                <textarea asp-for="Description" style="resize:none" class="form-control" rows="4" placeholder="Опишите заявку как можно подробнее"></textarea>
                                <span asp-validation-for="Description" class="text-danger"></span>
                            </div>
                            <div class="mb-4">
                                <label asp-for="Status" class="form-label required-field">Статус заявки</label>
                                <select asp-for="Status" asp-items="Html.GetEnumSelectList<TicketStatus>()" class="form-control">
                                    <option selected="selected" value="">-- Выберите статус --</option>
                                </select>
                                <span asp-validation-for="Status" class="text-danger"></span>

                            </div>
                            <div class="mb-4">
                                <label asp-for="Category" class="form-label required-field">Категория заявки</label>
                                <select asp-for="Category" asp-items="Html.GetEnumSelectList<TicketCategory>()" class="form-select">
                                    <option selected="selected" value="">-- Выберите категорию --</option>
                                </select>
                                <span asp-validation-for="Category" class="text-danger"></span>

                            </div>
                            <div class="mb-4">
                                <input asp-for="IsPriority" type="checkbox" class="form-check-input" />
                                <label asp-for="IsPriority" class="form-check-label">Приоритетная заявка</label>
                                <div class="form-text text-muted mt-1">
                                    Отметьте это поле, если ваш запрос требует срочного внимания.
                                </div>
                            </div>
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                                <button type="submit" class="btn btn-primary">Сохранить заявку</button>
                                <a asp-controller="" asp-action="Index" class="btn btn-outline-secondary me-md-2">Отмена</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
@* <h4>Комментарии</h4> *@
@* <form asp-controller="Comment" asp-action="Add" method="post"> *@
@*     <input type="number" hidden name="ticketId" value="@ViewBag.Id" /> *@
@*     <div class="form-group"> *@
@*         <label>Оставить комментарий</label> *@
@*         <textarea name="text" class="form-control" rows="3" required></textarea> *@
@*     </div> *@
@*     <button type="submit" class="btn btn-success mt-2">Добавить комментарий</button> *@
@* </form> *@

@* @if (Model.Comments.Any()) *@
@* { *@
@*     foreach (var comment in Model.Comments.OrderBy(c => c.CreatedAt)) *@
@*     { *@
@*         <div class="card mb-3"> *@
@*             <div class="card-body"> *@
@*                 <p>@comment.Text</p> *@
@*                 <small class="text-muted"> *@
@*                     @comment.Author.FirstName @comment.Author.LastName — *@
@*                     @comment.CreatedAt.ToString("dd.MM.yyyy HH:mm") *@
@*                 </small> *@
@*             </div> *@
@*         </div> *@
@*     } *@
@* } *@
@* else *@
@* { *@
@*     <p class="text-muted">Нет комментариев.</p> *@
@* } *@

<!-- Форма добавления -->

@* <form asp-controller="Tickets" asp-action="Edit" method="post"> *@
@*     <input type="hidden" name="id" value="@ViewBag.Id" /> *@

@*     <div asp-validation-summary="ModelOnly" class="text-danger"></div> *@

@*     <div class="form-group"> *@
@*         <label asp-for="Description">Описание заявки</label> *@
@*         <textarea asp-for="Description" class="form-control" rows="4"></textarea> *@
@*         <span asp-validation-for="Description" class="text-danger"></span> *@
@*     </div> *@
@*     <div class="form-group"> *@
@*         <label asp-for="Status">Статус заявки</label> *@
@*         <select asp-for="Status" asp-items="Html.GetEnumSelectList<TicketStatus>()" class="form-control"> *@
@*             <option selected="selected" value="">-- Выберите статус --</option> *@
@*         </select> *@
@*         <span asp-validation-for="Status" class="text-danger"></span> *@
@*     </div> *@
@*     <div class="form-group"> *@
@*         <label asp-for="Category">Категория заявки</label> *@
@*         <select asp-for="Category" asp-items="Html.GetEnumSelectList<TicketCategory>()" class="form-control"> *@
@*             <option selected="selected" value="">-- Выберите категорию --</option> *@
@*         </select> *@
@*         <span asp-validation-for="Category" class="text-danger"></span> *@
@*     </div> *@
@*     <div class="form-group form-check"> *@
@*         <input asp-for="IsPriority" type="checkbox" class="form-check-input" /> *@
@*         <label asp-for="IsPriority" class="form-check-label">Приоритетная</label> *@
@*     </div> *@

@*     <button type="submit" class="btn btn-success mt-2">Сохранить изменения</button> *@
@*     <a asp-controller="" asp-action="Index" class="btn btn-secondary mt-2">Отмена</a> *@
@* </form> *@